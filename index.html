<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Project Data Dashboard</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- PapaParse -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <style>
    body { font-family: Arial; background:#f4f6f8; margin:0; }
    header { background:#1e3a8a; color:white; padding:15px; text-align:center; }

    .cards {
      display:flex;
      justify-content:space-around;
      margin:20px;
      gap:20px;
    }

    .card {
      background:white;
      padding:20px;
      width:30%;
      border-radius:8px;
      text-align:center;
      box-shadow:0 2px 6px rgba(0,0,0,0.1);
    }

    .chart-grid {
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:20px;
      margin:20px;
    }

    .chart-box {
      background:white;
      padding:20px;
      border-radius:8px;
      box-shadow:0 2px 6px rgba(0,0,0,0.1);
    }

    table { width:100%; border-collapse:collapse; }
    th, td { border:1px solid #ddd; padding:6px; font-size:12px; }
    th { background:#e5e7eb; }
  </style>
</head>

<body>

<header>
  <h1>ðŸ“Š Project Data Dashboard</h1>
</header>

<!-- KPI Cards -->
<section class="cards">
  <div class="card">
    <h3>Total Records</h3>
    <h2 id="totalRecords">0</h2>
  </div>
  <div class="card">
    <h3>Total Amount</h3>
    <h2 id="totalAmount">0</h2>
  </div>
  <div class="card">
    <h3>Average Amount</h3>
    <h2 id="avgAmount">0</h2>
  </div>
</section>

<!-- Charts -->
<section class="chart-grid">
  <div class="chart-box">
    <h3>Column Chart (Amount)</h3>
    <canvas id="barChart"></canvas>
  </div>

  <div class="chart-box">
    <h3>Line Chart (Trend)</h3>
    <canvas id="lineChart"></canvas>
  </div>

  <div class="chart-box">
    <h3>Pie Chart (Distribution)</h3>
    <canvas id="pieChart"></canvas>
  </div>
</section>

<!-- Table -->
<section class="chart-box" style="margin:20px;">
  <h2>Data Preview</h2>
  <table id="dataTable">
    <thead></thead>
    <tbody></tbody>
  </table>
</section>

<script>
Papa.parse("project Data new (1) (1) (1).csv", {
  download: true,
  header: true,
  skipEmptyLines: true,

  complete: function(results) {

    const data = results.data;
    console.log("DATA LOADED:", data.length);

    const amounts = data.map(d => Number(d.Amount) || 0);
    const labels = data.map((_, i) => `Row ${i + 1}`);

    const total = amounts.reduce((a,b)=>a+b,0);

    // KPIs
    document.getElementById("totalRecords").innerText = data.length;
    document.getElementById("totalAmount").innerText = total.toFixed(2);
    document.getElementById("avgAmount").innerText = (total/data.length).toFixed(2);

    // Table
    const headers = Object.keys(data[0]);
    document.querySelector("#dataTable thead").innerHTML =
      "<tr>" + headers.map(h=>`<th>${h}</th>`).join("") + "</tr>";

    const tbody = document.querySelector("#dataTable tbody");
    tbody.innerHTML = "";

    data.slice(0,30).forEach(row=>{
      const tr = document.createElement("tr");
      headers.forEach(h=>{
        const td = document.createElement("td");
        td.innerText = row[h];
        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    });

    // BAR (Column) Chart
    new Chart(document.getElementById("barChart"), {
      type: "bar",
      data: {
        labels: labels.slice(0,20),
        datasets: [{
          label: "Amount",
          data: amounts.slice(0,20),
          backgroundColor: "#3b82f6"
        }]
      }
    });

    // LINE Chart
    new Chart(document.getElementById("lineChart"), {
      type: "line",
      data: {
        labels: labels.slice(0,20),
        datasets: [{
          label: "Amount Trend",
          data: amounts.slice(0,20),
          borderColor: "#10b981",
          fill: false,
          tension: 0.3
        }]
      }
    });

    // PIE Chart
    new Chart(document.getElementById("pieChart"), {
      type: "pie",
      data: {
        labels: labels.slice(0,10),
        datasets: [{
          data: amounts.slice(0,10),
          backgroundColor: [
            "#60a5fa","#34d399","#fbbf24","#f87171",
            "#a78bfa","#fb7185","#38bdf8",
            "#4ade80","#facc15","#fb923c"
          ]
        }]
      }
    });

  },

  error: function(err) {
    console.error("CSV Load Error:", err);
    alert("CSV file not loaded");
  }
});
</script>

</body>
</html>
